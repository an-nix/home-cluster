{
  "layout": {
    "line": "FI801",
    "stations": [ "A", "I" ],
    "opcGroups": {
      "master": "FI801.MASTER",
      "A": "FI801.A",
      "I": "FI801.I"
    },
    "timezoneid": "Europe/Paris"
  },
  "services": {
    "lineManager": {
      "RecipeApiConnectionName": "recipedblocal",
      "jwt": {
        "ConnectionName": "jwtlocal",
        "credentials": "bGluZU1hbmFnZXI6bGluZU1hbmFnZXJwYXNzd29yZA==",
        "scopeId": "read",
        "clientId": "couchdblocal"
      },
      "mqttConnectionName": "localRabbit",
      "mqttSiteConnectionName": "testPlatform",
      "mqttClientId": "LineManager",
      "retryInitInterval": 5000,
      "timeout": 60000,
      "useProcessRecipe": true,
      "syncClock": false,
      "stations": [
        "A",
        "I"
      ]
    },
    "controlTower": {
      "logFile": "ControlTower_.log",
      "mqttLocal": "localRabbit",
      "mqttSite": "testPlatform",
      "mqttClientId": "FI801controlTower",
      "monitoringTasks": {
        "RecipeValidationTaskConfig": {
          "IsActive": true,
          "ConnectionName": "couchdblocal",
          "CheckInterval": 15000,
          "Timeout": 15000
        },
        "couchDBMonitoringTask": {
          "isActive": true,
          "local": {
            "CouchDBConnectionName": "couchdblocal",
            "jwt": {
              "ConnectionName": "jwtlocal",
              "credentials": "Y29udHJvbFRvd2VyOmNvbnRyb2xUb3dlclBhc3N3b3Jk",
              "scopeId": "admin",
              "clientId": "couchdblocal"
            },
            "replicationCredentials": "bXl1c2VyOm15cGFzc3dvcmQ="
          },
          "site": {
            "CouchDBConnectionName": "couchdbsite",
            "jwt": {
              "ConnectionName": "jwtlocal",
              "credentials": "Y29udHJvbFRvd2VyOmNvbnRyb2xUb3dlclBhc3N3b3Jk",
              "scopeId": "admin",
              "clientId": "couchdbsite"
            },
            "replicationCredentials": "bXl1c2VyOm15cGFzc3dvcmQ="
          },
          "checkInterval": 15000
        },
        "influxDBMonitoringTask": {
          "isActive": false,
          "influxDBConnection": "localInflux",
          "checkInterval": 30000,
          "buckets": [
            "logging",
            "History",
            "Results"
          ]
        },
        "servicesMonitoringTask": {
          "isActive": true,
          "checkInterval": 60000,
          "checkTimeout": 30000,
          "services": [
            "LineManager"
            "PrintingService",
            "DPLGateway",
            "FlashRunnerGateway"
          ]
        }
      }
    },
    "recipeRestApi": {
      "couchDBConnectionName": "couchdbsite"
    },
    "commandStreamer": {
      "mqttConnectionName": "testPlatform",
      "mqttClientId": "CommandStreamer",
      "redisConnectionName": "localRedis",
      "commands": [
        {
          "group": "FI801.MES_MS.A.RESULTS",
          "trigger": "FI801.MES_MS.A.RESULTS.SendResultRequest",
          "triggerValue": "1",
          "response": "FI801.MES_MS.A.RESULTS.SendResultResponse",
          "handshake": true,
          "streams": [ "command:results:resultservice", "command:results:trackingservice" ],
          "topic": "FI801/command/results",
          "command": "results",
          "messageParameters": [
            {
              "parameter": "MESLine",
              "value": "FI802"
            },
            {
              "parameter": "MESStation",
              "value": "C"
            }
          ]
        }
      ],
      "TimeoutTimerDuration": 5000,
      "RetryInitInterval": 8000
    }
  },
  "dataSources": {
    "CouchDB": [
      {
        "name": "couchdblocal",
        "url": "http://localhost:5984/"
      },
      {
        "name": "couchdbsite",
        "url": "http://localhos:5983/"
      }
    ],
    "RecipeAPI": [
      {
        "name": "recipedblocal",
        "url": "http://localhost:3000/"
      }
    ],
    "JwtAPI": [
      {
        "name": "jwtlocal",
        "url": "http://localhost:8094/"
      }
    ],
    "MQTT": [
      {
        "name": "localRabbit",
        "url": "localhost",
        "port": 1882,
        "wsPort": 15674,
        "keepAliveSecs": 40,
        "waitTimeoutSecs": 5,
        "maximumQualityOfService": 0,
        "allowWildcardsInTopicFilters": true,
        "username": "YWRt",
        "password": "U09TYXJkdGlj"
      },
      {
        "name": "testPlatform",
        "url": "192.168.1.2",
        "port": 1883,
        "wsPort": 15675,
        "keepAliveSecs": 40,
        "waitTimeoutSecs": 5,
        "maximumQualityOfService": 0,
        "allowWildcardsInTopicFilters": true,
        "username": "YWRt",
        "password": "U09TYXJkdGlj"
      }
    ],
    "Redis": [
      {
        "name": "localRedis",
        "url": "localhost",
        "port": 6379,
        "username": "ZGVmYXVsdA==",
        "password": "U09TYXJkdGlj"
      }
    ],
	"influxDB": [
      {
        "name": "localInflux",
        "url": "http://192.168.1.20",
        "port": 8086,
        "organization": "fi801",
        "token": "PcaGs9wChaNTOFR5yR2fgS8AsEuo1iyhRoKoFbOniC9t_l4sQe7vXscisfyKUVIO41jVA7CqEzBK3MTBJHhgPw=="
      }
    ]
  },
  "Serilog": {
    "Using": [ "Logging.Serilog.Sinks" ],
    "minimumLevel": {
      "Default": "Verbose",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "InfluxDB",
        "Args": {
          "address": "http://192.168.1.20:8086",
          "token": "PcaGs9wChaNTOFR5yR2fgS8AsEuo1iyhRoKoFbOniC9t_l4sQe7vXscisfyKUVIO41jVA7CqEzBK3MTBJHhgPw==",
          "organization": "fi105",
          "bucket": "logging",
          "enableTags": [ "level", "hostname", "source", "instanceId", "eventId", "eventName" ],
          "customTags": [],
          "customFields": []
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "/LOGS/SomfyServices_.log",
          "rollingInterval": "Day",
          "rollOnFileSizeLimit": true,
          "fileSizeLimitBytes": 100024,
          "retainedFileCountLimit": 10,
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u3}]{Message}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "{Level}: [{Timestamp:yyyy-MM-dd HH:mm:ss.fff}]{NewLine}{Scope} {NewLine} {Message}{NewLine}{NewLine}",
          "restrictedToMinimumLevel": "Debug"
        }
      }
    ]
  },
  "logs": {
    "file": {
      "path": "/logs",
      "rollingInterval": "Day",
      "rollOnFileSizeLimit": true,
      "fileSizeLimitBytes": 100024,
      "retainedFileCountLimit": 7,
      "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u3}]{Message}{NewLine}{Exception}"
    }
  }
}
